<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fresher Ticket Search — Download</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--glass:rgba(255,255,255,0.04);--muted:rgba(255,255,255,0.65)}
    *{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',Arial;background:linear-gradient(180deg,#071025 0%, #081226 60%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
    .wrap{width:100%;max-width:920px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);backdrop-filter: blur(6px)}
    header{display:flex;gap:16px;align-items:center}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#2dd4bf);display:flex;align-items:center;justify-content:center;font-weight:700;color:#041022}
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 18px;color:var(--muted);font-size:14px}

    .search-row{display:flex;gap:12px;align-items:center}
    input[type="search"]{flex:1;padding:12px 14px;border-radius:12px;border:1px solid var(--glass);background:transparent;color:inherit;font-size:16px;outline:none;transition:transform .18s ease, box-shadow .18s ease}
    input[type="search"]:focus{transform:translateY(-2px);box-shadow:0 6px 18px rgba(2,6,23,0.45)}
    button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#06b6d4);color:#041022;font-weight:600;cursor:pointer}

    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;margin-top:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:8px;align-items:flex-start;min-height:120px}
    .ticket-thumb{width:100%;height:110px;border-radius:8px;background-size:cover;background-position:center;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02)}
    .meta{display:flex;width:100%;justify-content:space-between;align-items:center}
    .name{font-weight:700}
    .noresult{padding:18px;border-radius:10px;background:rgba(255,255,255,0.02);color:var(--muted);text-align:center}

    footer{margin-top:18px;color:var(--muted);font-size:13px}

    /* small animation */
    .pulse{animation:pulse 2.6s ease-in-out infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

    @media (max-width:520px){.cards{grid-template-columns:1fr}.logo{width:46px;height:46px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">FT</div>
      <div>
        <h1>Fresher Tickets — Name Search</h1>
        <p class="lead">Type your name (or roll) below. If a match is found you can preview and download your ticket.</p>
      </div>
    </header>

    <div style="margin-top:14px">
      <div class="search-row">
        <input id="q" type="search" placeholder="Search by full name, roll number or nickname" aria-label="Search name" />
        <button id="go">Search</button>
      </div>

      <div id="results" style="margin-top:16px"></div>

      <div id="grid" class="cards" aria-live="polite" style="margin-top:10px"></div>

      <div id="no" class="noresult" style="display:none;margin-top:12px">No ticket found. Check spelling or ask admin.</div>

      <footer>Make sure your ticket images are uploaded in <code>/tickets/</code> folder and names.json maps names to filenames.</footer>
    </div>
  </div>

  <script>
    // CONFIG
    // By default this script will try to fetch '/tickets/names.json' from the same GitHub Pages site.
    // names.json format: [{"name":"Ajit Pawara","file":"ajit_pawara.png","alt":"Ticket for Ajit"}, ...]

    const SOURCE = '/tickets/names.json';
    const BASE = '/tickets/'; // where images live on GitHub Pages

    // helper normalize
    function normalize(s){return (s||'').toString().trim().toLowerCase().replace(/\s+/g,' ')}

    // load names.json
    async function loadIndex(){
      try{
        const res = await fetch(SOURCE,{cache:'no-cache'});
        if(!res.ok) throw new Error('index not found');
        const j = await res.json();
        return j.map(item=>({
          name: item.name,
          file: item.file,
          key: normalize(item.name),
          alt: item.alt || (`Ticket for ${item.name}`)
        }));
      }catch(e){
        // fallback small demo list so page still works without index during testing
        return [
          {name:'Ajit Pawara', file:'ajit_pawara.png', key:normalize('Ajit Pawara'), alt:'Ticket Ajit'},
          {name:'Vidhi Sharma', file:'vidhi.png', key:normalize('Vidhi Sharma'), alt:'Ticket Vidhi'}
        ];
      }
    }

    // render a ticket card
    function makeCard(item){
      const div = document.createElement('div'); div.className='card pulse';
      const thumb = document.createElement('div'); thumb.className='ticket-thumb';
      thumb.style.backgroundImage = `url(${BASE + encodeURIComponent(item.file)})`;
      div.appendChild(thumb);
      const meta = document.createElement('div'); meta.className='meta';
      const name = document.createElement('div'); name.className='name'; name.textContent = item.name;
      const a = document.createElement('a'); a.href = BASE + encodeURIComponent(item.file); a.setAttribute('download',''); a.textContent='Download'; a.style.fontWeight=700; a.style.textDecoration='none'; a.style.padding='8px 10px'; a.style.borderRadius='8px'; a.style.background='linear-gradient(90deg,#7c3aed,#06b6d4)'; a.style.color='#041022';
      meta.appendChild(name); meta.appendChild(a);
      div.appendChild(meta);
      return div;
    }

    // search logic
    (async ()=>{
      const index = await loadIndex();
      const q = document.getElementById('q');
      const go = document.getElementById('go');
      const grid = document.getElementById('grid');
      const no = document.getElementById('no');

      function showResults(list){
        grid.innerHTML='';
        if(!list.length){ no.style.display='block'; return; } else no.style.display='none';
        list.forEach(it=>grid.appendChild(makeCard(it)));
      }

      function searchOnce(){
        const v = normalize(q.value);
        if(!v){ grid.innerHTML=''; no.style.display='block'; no.textContent='Please enter a name.'; return; }
        const found = index.filter(it=>it.key.includes(v) || v.includes(it.key));
        showResults(found);
      }

      go.addEventListener('click', searchOnce);
      q.addEventListener('keydown', e=>{ if(e.key==='Enter') searchOnce(); });

      // optional: show instructions or randomized preview
      // show 6 sample cards
      showResults(index.slice(0,6));
    })();
  </script>
</body>
</html>
